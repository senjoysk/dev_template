# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## 🚨 重要: プロジェクト情報
**プロジェクト名**: [プロジェクト名を記入]
**概要**: [プロジェクトの概要を記入]
**開発段階**: 初期開発

## 🔴🟢♻️ 開発方針: t_wada式TDD

**すべての開発はテスト駆動開発（TDD）のRed-Green-Refactorサイクルで実施してください**

### TDDの基本サイクル
1. **🔴 Red**: 失敗するテストを書く
2. **🟢 Green**: テストを通す最小限の実装
3. **♻️ Refactor**: テストが通る状態を保ちながらリファクタリング

### t_wadaさんのTDD原則
- **テストファースト**: 実装前に必ずテストを書く
- **小さなステップ**: 一度に一つのことだけ
- **YAGNI (You Aren't Gonna Need It)**: 必要になるまで作らない
- **三角測量**: 複数のテストケースから一般化を導く
- **明白な実装**: シンプルで分かりやすいコードを書く

## 🚨 必須: TDD開発フロー

### 新機能開発の手順
1. **🔴 Red Phase** - 失敗するテストを書く
   - TODOリストの作成（実装する機能を小さなタスクに分解）
   - 最初のテストケースの決定（最も簡単なケースから）
   - テストが失敗することを確認

2. **🟢 Green Phase** - テストを通す
   - 最小限の実装（仮実装でもOK）
   - テストが通ることを確認

3. **♻️ Refactor Phase** - リファクタリング
   - テストが通る状態を維持しながら改善
   - より良い設計に変更

4. **繰り返し**
   - 次のテストケースに進む

### コーディング前の必須確認
- [ ] TODOリストの作成（実装する機能を小さなタスクに分解）
- [ ] 最初のテストケースの決定（最も簡単なケースから）
- [ ] インターフェースの設計（使い方から考える）
- [ ] エラーケースの洗い出し

## TDDでのコーディング規約

### 1. テストファースト開発
- 実装を先に書かない
- テストから書き始める
- テストが失敗することを確認してから実装

### 2. インターフェース駆動設計
- **使い方から設計**: テストで理想的な使い方を先に書く
- **Interface First**: インターフェースを定義してから実装
- **依存性注入**: テスタブルな設計のためにインターフェースを注入

### 3. 実装規約
- エラーハンドリングを適切に行う
- 適切なログ出力を行う
- コメントは必要な箇所にのみ記載

## 🚨 Claude Code: タスク完了前の必須確認

**Claude Codeは依頼されたタスクを完了したと判断する前に、以下を必ず確認してください:**

### タスク完了前の品質ゲート
1. コードが正しく動作することを確認
2. テストが存在する場合は実行して確認
3. エラーハンドリングが適切に実装されていることを確認

### 実行タイミング
- **タスク実装完了後**: コードの実装やファイル変更が完了した時点
- **完了報告前**: ユーザーに「完了しました」と報告する前

### 目的
- **早期問題検出**: 開発時点で問題を検出
- **品質保証**: 動作確認
- **開発速度向上**: 後戻り作業の削減

## 📋 開発チェックリスト

### 🚨 絶対に守るべきTDDルール
1. **テストなしでコードを書かない**
2. **失敗するテストを確認してから実装**
3. **一度に一つのことだけ**
4. **明白な実装を心がける**
5. **TODOリストで進捗管理**

**🚨 CRITICAL: 実装前に必ずテストを書き、Red-Green-Refactorサイクルを守ること**

## 🔄 TDDコメント管理のベストプラクティス

### フェーズ別コメント管理手順

#### 1. **🔴 Red Phase - 失敗するテストを書く**
- テストコメントに「🔴 Red Phase: 機能名 - 実装前なので失敗する」と記載
- 失敗することを確認

#### 2. **🟢 Green Phase - テストを通す最小限の実装**
- コメントを「🟢 Green Phase: 機能名 - 最小限の実装でテストが通る」に更新
- テストが通ることを確認

#### 3. **♻️ Refactor Phase - リファクタリング**
- コメントを「♻️ Refactor Phase: 機能名 - リファクタリング完了」に更新
- テストが通る状態を維持

### 実装完了後のコメント整理
- フェーズ表記を削除し、機能説明に変更
- テストの意図を明確に記述

---

**🎯 本開発ガイドは、効率的で高品質な開発を実現するための指針です。TDD開発を徹底し、継続的にシステムを改善していきましょう。**